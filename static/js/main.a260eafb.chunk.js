(this.webpackJsonpgroceries=this.webpackJsonpgroceries||[]).push([[0],[,,function(e,t,n){e.exports={Item:"Item_Item__16sp8",ItemCompleted:"Item_ItemCompleted__3IRuI Item_Item__16sp8",field:"Item_field__2uX1q",textCompleted:"Item_textCompleted__ij3Pf Item_field__2uX1q",CheckBox:"Item_CheckBox__hgMI8",Checked:"Item_Checked__2Na6Q",Unchecked:"Item_Unchecked__gt_ks",DeleteButton:"Item_DeleteButton__3jjaR",DeleteIcon:"Item_DeleteIcon__1WSAP"}},,,,,,function(e,t,n){e.exports={ItemList:"ItemList_ItemList__4ujzD"}},function(e,t,n){e.exports={Button:"AddItemButton_Button__2JHVy"}},,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(5),o=n.n(r),c=(n(19),n(3)),l=n(6),s=n(7),d=n(1),u=n(11),m=n(12),h=(n(20),n(2)),f=n.n(h);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var I=i.a.createElement("path",{d:"m12 0c6.627417 0 12 5.372583 12 12s-5.372583 12-12 12-12-5.372583-12-12 5.372583-12 12-12zm0 2c-5.5228475 0-10 4.4771525-10 10s4.4771525 10 10 10 10-4.4771525 10-10-4.4771525-10-10-10zm5.3033009 5.31801948 1.4142135 1.41421357-8.4852814 8.48528135-4.94974742-4.9497474 1.41421356-1.4142136 3.53482676 3.536241z",fillRule:"evenodd"}),C=function(e){var t=e.svgRef,n=e.title,a=v(e,["svgRef","title"]);return i.a.createElement("svg",p({height:24,viewBox:"0 0 24 24",width:24,ref:t},a),n?i.a.createElement("title",null,n):null,I)},g=i.a.forwardRef((function(e,t){return i.a.createElement(C,p({svgRef:t},e))}));n.p;function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var O=i.a.createElement("path",{d:"m12 0c6.627417 0 12 5.372583 12 12s-5.372583 12-12 12-12-5.372583-12-12 5.372583-12 12-12zm0 2c-5.5228475 0-10 4.4771525-10 10s4.4771525 10 10 10 10-4.4771525 10-10-4.4771525-10-10-10z"}),y=function(e){var t=e.svgRef,n=e.title,a=k(e,["svgRef","title"]);return i.a.createElement("svg",b({height:24,viewBox:"0 0 24 24",width:24,ref:t},a),n?i.a.createElement("title",null,n):null,O)},j=i.a.forwardRef((function(e,t){return i.a.createElement(y,b({svgRef:t},e))}));n.p;function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function E(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var w=i.a.createElement("path",{d:"m12 2c5.5228475 0 10 4.4771525 10 10s-4.4771525 10-10 10-10-4.4771525-10-10 4.4771525-10 10-10zm3.5355339 5.05025253-3.5352814 3.53599997-3.53578641-3.53599997-1.41421356 1.41421356 3.53599997 3.53578641-3.53599997 3.5352814 1.41421356 1.4142136 3.53578641-3.535495 3.5352814 3.535495 1.4142136-1.4142136-3.535495-3.5352814 3.535495-3.53578641z",fillRule:"evenodd"}),x=function(e){var t=e.svgRef,n=e.title,a=E(e,["svgRef","title"]);return i.a.createElement("svg",_({height:24,viewBox:"0 0 24 24",width:24,ref:t},a),n?i.a.createElement("title",null,n):null,w)},B=i.a.forwardRef((function(e,t){return i.a.createElement(x,_({svgRef:t},e))}));n.p;var D=function(e){var t=e.onDeleteClick?i.a.createElement("button",{className:f.a.DeleteButton,onClick:function(t){e.onDeleteClick&&e.onDeleteClick({id:e.id})}},i.a.createElement(B,{className:f.a.DeleteIcon})):null,n=e.hasCheckButton?i.a.createElement("button",{className:f.a.CheckBox,onClick:function(t){e.onCheckClick&&e.onCheckClick({id:e.id,isCompleted:e.isCompleted})}},e.isCompleted?i.a.createElement(g,{className:f.a.Checked}):i.a.createElement(j,{className:f.a.Unchecked})):null,a=e.isCompleted?f.a.ItemCompleted:f.a.Item,r=e.isCompleted?f.a.textCompleted:f.a.field;return i.a.createElement("li",{className:a},n,i.a.createElement("input",{className:r,type:"text",value:e.text,onChange:function(t){e.onValueChange&&e.onValueChange({id:e.id,text:t.target.value})},disabled:!!e.isCompleted,autoFocus:e.isOpen,onFocus:function(){e.onInputFocus&&e.onInputFocus()},onBlur:function(){e.onBlur&&e.onBlur({id:e.id})},onKeyUp:function(t){"Enter"===t.key&&e.onInputEnter({orderId:e.orderId})}}),t)},R=n(8),S=n.n(R);var N=function(e){var t=function(t){var n=t.array,a=t.isCompleted;return n.filter((function(e){return e.isCompleted===a})).sort((function(e,t){return e.orderId-t.orderId})).map((function(t){return function(t){return i.a.createElement(D,{key:t.id,text:t.text,isCompleted:t.isCompleted,onValueChange:e.onValueChange,onCheckClick:e.onCheckClick,onInputEnter:e.onInputEnter,id:t.id,isOpen:t.isOpen,onBlur:e.onBlur,orderId:t.orderId,onDeleteClick:e.onDeleteClick,hasCheckButton:!0})}(t)}))},n=t({array:e.items,isCompleted:!1}),a=t({array:e.items,isCompleted:!0});return i.a.createElement("ul",{className:S.a.ItemList},n,a)},A=n(9),P=n.n(A);var V=function(e){return i.a.createElement("button",{className:P.a.Button,onClick:e.onClick},"Add item")},z=n(22),M=n(10),J="linda-groceries.herokuapp.com",L="https://".concat(J),U="wss://".concat(J,"/cable"),F={Accept:"application/json","Content-Type":"application/json"},H=Object(M.createConsumer)(U);function T(e){return e.json()}var W={id:Object(z.a)(),subscribeToUpdates:function(e){var t=e.onConnected,n=e.onDisconnected,a=e.onReceived;H.subscriptions.create({channel:"ListChannel"},{connected:function(){t()},disconnected:function(){n()},received:function(e){a(e)}})},getItems:function(e){fetch("".concat(L,"/items"),{headers:F}).then(T).then(e)},createItem:function(e){var t=Object.assign({},e,{clientId:this.id});fetch("".concat(L,"/items"),{method:"post",headers:F,body:JSON.stringify(t)})},updateItem:function(e){var t=Object.assign({},e,{clientId:this.id});fetch("".concat(L,"/items/").concat(e.id),{method:"put",headers:F,body:JSON.stringify(t)})},deleteItem:function(e){var t={clientId:this.id};fetch("".concat(L,"/items/").concat(e),{method:"delete",headers:F,body:JSON.stringify(t)})}},q=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state=JSON.parse(window.localStorage.getItem("groceries"))||{items:[]},a.handleConnected=a.handleConnected.bind(Object(d.a)(a)),a.handleDisconnected=a.handleDisconnected.bind(Object(d.a)(a)),a.handleReceived=a.handleReceived.bind(Object(d.a)(a)),a.handleAddItemClick=a.handleAddItemClick.bind(Object(d.a)(a)),a.handleDeleteItemClick=a.handleDeleteItemClick.bind(Object(d.a)(a)),a.handleValueChange=a.handleValueChange.bind(Object(d.a)(a)),a.handleCheckClick=a.handleCheckClick.bind(Object(d.a)(a)),a.handleItemBlur=a.handleItemBlur.bind(Object(d.a)(a)),a.handleInputEnter=a.handleInputEnter.bind(Object(d.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;W.getItems((function(t){e.setState({items:t})})),W.subscribeToUpdates({onConnected:this.handleConnected,onDisconnected:this.handleDisconnected,onReceived:this.handleReceived})}},{key:"componentDidUpdate",value:function(){var e;e=this.state,window.localStorage.setItem("groceries",JSON.stringify(e))}},{key:"handleConnected",value:function(){console.log("Connected to ListChannel.")}},{key:"handleDisconnected",value:function(){console.log("Disconnected from ListChannel.")}},{key:"hasItem",value:function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].id===t)return!0;return!1}},{key:"handleReceived",value:function(e){if(e.clientId!==W.id)switch(e.message_type){case"item_create":this.hasItem(this.state.items,e.item.id)||this.createItem(e.item);break;case"item_update":this.updateItem(e.item);break;case"item_delete":this.deleteItem(e.item.id);break;default:console.log("Unrecognized message type")}}},{key:"createItem",value:function(e){var t=e.id,n=void 0===t?Object(z.a)():t,a=e.orderId,i=e.text,r=void 0===i?"":i,o=e.isCompleted,c=void 0!==o&&o,l=e.isOpen,s={id:n,orderId:a,text:r,isCompleted:c,isOpen:void 0!==l&&l};return this.setState({items:this.state.items.map((function(e){return e.orderId>=s.orderId?Object.assign({},e,{orderId:e.orderId+1}):e})).concat(s)}),s}},{key:"updateItem",value:function(e){this.setState({items:this.state.items.map((function(t){return t.id===e.id?Object.assign({},t,e):t}))})}},{key:"deleteItem",value:function(e){this.setState({items:this.state.items.filter((function(t){return t.id!==e}))})}},{key:"handleAddItemClick",value:function(){var e,t=this.state.items.filter((function(e){return!e.isCompleted})).map((function(e){return e.orderId}));e=t.length>0?Math.max.apply(Math,Object(c.a)(t))+1:0;var n=this.createItem({orderId:e,isOpen:!0});W.createItem(n)}},{key:"handleInputEnter",value:function(e){var t=e.orderId+1,n=this.createItem({orderId:t,isOpen:!0});W.createItem(n)}},{key:"handleDeleteItemClick",value:function(e){var t=e.id;this.deleteItem(t),W.deleteItem(t)}},{key:"handleItemBlur",value:function(e){var t=e.id;this.setState({items:this.state.items.map((function(e){if(e.id===t){var n=Object.assign({},e,{isOpen:!1});return W.updateItem(n),n}return e}))})}},{key:"handleValueChange",value:function(e){var t=e.id,n=e.text;this.setState({items:this.state.items.map((function(e){if(e.id===t){var a=Object.assign({},e,{text:n});return W.updateItem(a),a}return e}))})}},{key:"handleCheckClick",value:function(e){var t,n=e.id,a=e.isCompleted,i=this.state.items.filter((function(e){return e.isCompleted===!a})).map((function(e){return e.orderId}));t=i.length>0?a?Math.max.apply(Math,Object(c.a)(i))+1:Math.min.apply(Math,Object(c.a)(i))-1:0,this.setState({items:this.state.items.map((function(e){if(e.id===n){var a=Object.assign({},e,{isCompleted:!e.isCompleted,orderId:t});return W.updateItem(a),a}return e}))})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"AppHeader"},i.a.createElement("h1",{className:"AppHeaderHeading"},"Linda from Purcha$ing")),i.a.createElement(N,{items:this.state.items,onValueChange:this.handleValueChange,onCheckClick:this.handleCheckClick,onBlur:this.handleItemBlur,onInputEnter:this.handleInputEnter,onAddItemClick:this.handleAddItemClick,onDeleteClick:this.handleDeleteItemClick}),i.a.createElement(V,{onClick:this.handleAddItemClick}))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.a260eafb.chunk.js.map