(this.webpackJsonpgroceries=this.webpackJsonpgroceries||[]).push([[0],{14:function(e,t,n){e.exports={Banner:"OnLineStatusBanner_Banner__2Ej-k",OnLine:"OnLineStatusBanner_OnLine__3YRCZ OnLineStatusBanner_Banner__2Ej-k",OffLine:"OnLineStatusBanner_OffLine__2hC5H OnLineStatusBanner_Banner__2Ej-k",TryingToConnect:"OnLineStatusBanner_TryingToConnect__1DeyF OnLineStatusBanner_Banner__2Ej-k"}},2:function(e,t,n){e.exports={Item:"Item_Item__16sp8",ItemCompleted:"Item_ItemCompleted__3IRuI Item_Item__16sp8",Dragged:"Item_Dragged__1B27_",field:"Item_field__2uX1q",textCompleted:"Item_textCompleted__ij3Pf Item_field__2uX1q",CheckBox:"Item_CheckBox__hgMI8",Checked:"Item_Checked__2Na6Q",Unchecked:"Item_Unchecked__gt_ks",DeleteButton:"Item_DeleteButton__3jjaR",DeleteIcon:"Item_DeleteIcon__1WSAP"}},21:function(e,t,n){e.exports={ItemList:"ItemList_ItemList__4ujzD"}},22:function(e,t,n){e.exports={Button:"ToolbarButton_Button__3uxur"}},23:function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__1fjPn"}},28:function(e,t,n){e.exports=n(44)},33:function(e,t,n){},34:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(20),o=n.n(i),l=(n(33),n(3)),c=n(4),s=n(11),d=n(7),u=n(1),h=n(12),m=n(13),f=(n(34),n(8)),g=n.n(f);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var I=a.a.createElement("path",{d:"m13.3254199 1.01518685.0872208.07770637 3.5355339 3.5355339c.3626297.3626297.3885318.9344751.0777064 1.32699275l-.0777064.08722082-3.5355339 3.5355339c-.3905243.39052429-1.0236893.39052429-1.4142136 0-.3626297-.3626297-.3885318-.93447509-.0777063-1.32699275l.0777063-.08722081 2.1438822-2.1432897c-.3039584-.01380945-.655332-.0204143-1.0725216-.02217343l-1.0697877.0015021c-3.3137085 0-6 2.6862915-6 6s2.6862915 6 6 6 6-2.6862915 6-6c0-.5522847.4477153-1 1-1s1 .4477153 1 1c0 4.418278-3.581722 8-8 8s-8-3.581722-8-8 3.581722-8 8-8l1.1081784-.00147832c.1345115.00058353.2633284.00164591.386965.00327194l-1.4967163-1.49468684c-.3626297-.3626297-.3885318-.93447509-.0777063-1.32699275l.0777063-.08722081c.3626297-.3626297.9344751-.38853182 1.3269928-.07770637z"}),C=function(e){var t=e.svgRef,n=e.title,r=v(e,["svgRef","title"]);return a.a.createElement("svg",p({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,I)},O=a.a.forwardRef((function(e,t){return a.a.createElement(C,p({svgRef:t},e))}));n.p;var b=function(e){return a.a.createElement("header",{className:g.a.Header},a.a.createElement("div",null),a.a.createElement("h1",{className:g.a.Heading},e.title),a.a.createElement("button",{className:g.a.ReloadButton,onClick:e.onReloadClick},a.a.createElement(O,{className:g.a.ReloadIcon})))},k=n(14),y=n.n(k);var j=function(e){var t,n;switch(e.status){case"online":t=y.a.OnLine,n="Online";break;case"tryingToConnect":t=y.a.TryingToConnect,n="Connecting to server...";break;default:t=y.a.OffLine,n="Unknown connection status..."}return a.a.createElement("div",{className:t},n)},_=n(5),w=n(2),E=n.n(w);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var x=a.a.createElement("path",{d:"m12 0c6.627417 0 12 5.372583 12 12s-5.372583 12-12 12-12-5.372583-12-12 5.372583-12 12-12zm0 2c-5.5228475 0-10 4.4771525-10 10s4.4771525 10 10 10 10-4.4771525 10-10-4.4771525-10-10-10zm5.3033009 5.31801948 1.4142135 1.41421357-8.4852814 8.48528135-4.94974742-4.9497474 1.41421356-1.4142136 3.53482676 3.536241z",fillRule:"evenodd"}),D=function(e){var t=e.svgRef,n=e.title,r=P(e,["svgRef","title"]);return a.a.createElement("svg",R({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,x)},S=a.a.forwardRef((function(e,t){return a.a.createElement(D,R({svgRef:t},e))}));n.p;function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var L=a.a.createElement("path",{d:"m12 0c6.627417 0 12 5.372583 12 12s-5.372583 12-12 12-12-5.372583-12-12 5.372583-12 12-12zm0 2c-5.5228475 0-10 4.4771525-10 10s4.4771525 10 10 10 10-4.4771525 10-10-4.4771525-10-10-10z"}),N=function(e){var t=e.svgRef,n=e.title,r=T(e,["svgRef","title"]);return a.a.createElement("svg",B({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,L)},A=a.a.forwardRef((function(e,t){return a.a.createElement(N,B({svgRef:t},e))}));n.p;function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var H,M=a.a.createElement("path",{d:"m12 2c5.5228475 0 10 4.4771525 10 10s-4.4771525 10-10 10-10-4.4771525-10-10 4.4771525-10 10-10zm3.5355339 5.05025253-3.5352814 3.53599997-3.53578641-3.53599997-1.41421356 1.41421356 3.53599997 3.53578641-3.53599997 3.5352814 1.41421356 1.4142136 3.53578641-3.535495 3.5352814 3.535495 1.4142136-1.4142136-3.535495-3.5352814 3.535495-3.53578641z",fillRule:"evenodd"}),U=function(e){var t=e.svgRef,n=e.title,r=q(e,["svgRef","title"]);return a.a.createElement("svg",Y({height:24,viewBox:"0 0 24 24",width:24,ref:t},r),n?a.a.createElement("title",null,n):null,M)},W=a.a.forwardRef((function(e,t){return a.a.createElement(U,Y({svgRef:t},e))})),z=(n.p,a.a.forwardRef((function(e,t){var n=e.onDeleteClick?a.a.createElement("button",{className:E.a.DeleteButton,onClick:function(t){e.onDeleteClick&&e.onDeleteClick({id:e.id})}},a.a.createElement(W,{className:E.a.DeleteIcon})):null,r=e.hasCheckButton?a.a.createElement("button",{className:E.a.CheckBox,onClick:function(t){e.onCheckClick&&e.onCheckClick({id:e.id,isCompleted:e.isCompleted})}},e.isCompleted?a.a.createElement(S,{className:E.a.Checked}):a.a.createElement(A,{className:E.a.Unchecked})):null,i=e.isCompleted?E.a.textCompleted:E.a.field;return a.a.createElement("li",{className:function(){var t="";return t=e.isCompleted?E.a.ItemCompleted:E.a.Item,e.isBeingDragged&&(t="".concat(t," ").concat(E.a.Dragged)),t}(),ref:t,style:e.itemStyle,onPointerDown:function(t){return e.onPointerDown(t,e.id,e.index,e.text)}},r,a.a.createElement("input",{className:i,type:"text",value:e.text,onChange:function(t){e.onValueChange&&e.onValueChange({id:e.id,text:t.target.value})},disabled:!!e.isCompleted,autoFocus:e.isOpen,onFocus:function(t){return e.text,void(e.onInputFocus&&e.onInputFocus())},onBlur:function(t){return e.text,void(e.onBlur&&e.onBlur({id:e.id}))},onKeyUp:function(t){"Enter"===t.key&&e.onInputEnter({orderId:e.orderId})}}),n)}))),F=n(21),V=n.n(F);function J(e,t,n){var r,a,i,o=Math.round(e/t);return r=o,a=0,i=n,Math.min(Math.max(r,a),i)}function Q(e){var t=e.getBoundingClientRect(),n=window.scrollY;return{top:t.top+n,height:t.height}}function X(e){return Q(e).top}var G=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={isDragging:!1,dragItemId:null,dragItemHeight:null,dragItemTop:null,dragItemTopEdgeOffsetY:null,dragItemIndex:null,dragItemRelativeOffsetTop:null,dragPointerPageY:null,listRef:a.a.createRef()},r.itemRefs={},r.handlePointerDown=r.handlePointerDown.bind(Object(u.a)(r)),r.handlePointerUp=r.handlePointerUp.bind(Object(u.a)(r)),r.handlePointerCancel=r.handlePointerCancel.bind(Object(u.a)(r)),r.handlePointerMove=r.handlePointerMove.bind(Object(u.a)(r)),r}return Object(d.a)(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.items.find((function(e){return e.id===t.dragItemId}));if(!n)return null;var r=e.items.indexOf(n),a=X(t.listRef.current),i=r*t.dragItemHeight+a;return{dragItemIndex:r,dragItemTop:i,dragItemRelativeOffsetTop:t.dragPointerPageY-i-t.dragItemTopEdgeOffsetY}}}]),Object(d.a)(n,[{key:"componentDidMount",value:function(){}},{key:"reorderItems",value:function(e,t,n){var r=function(e,t,n){var r=Object(c.a)(e);if(t>e.length-1)return console.clear(),console.warn("move(): No item to move at index ".concat(t," in array:")),console.table(e),r;var a=r.splice(t,1)[0];return r.splice(n,0,a),r}(e,t,n),a=null;return r.map((function(e){return null===a?a=e.orderId:a>=e.orderId?a+=1:a=e.orderId,Object(l.a)({},e,{orderId:a})}))}},{key:"startDrag",value:function(e){var t=e.itemId,n=e.offsetY,r=e.pageY,a=e.height,i=e.top,o=e.itemIndex;console.log("startDrag"),this.setState({isDragging:!0,dragItemId:t,dragItemHeight:a,dragItemTop:i,dragItemTopEdgeOffsetY:n,dragItemIndex:o,dragPointerPageY:r})}},{key:"stopDrag",value:function(){console.log("stopDrag"),this.setState({isDragging:!1,dragItemId:null,dragItemHeight:null,dragItemTop:null,dragItemTopEdgeOffsetY:null,dragItemIndex:null,dragItemRelativeOffsetTop:null,dragPointerPageY:null})}},{key:"handlePointerDown",value:function(e,t,n,r){console.log("handlePointerDown",r);var a=e.pageY,i=Q(e.currentTarget),o=i.height,l=i.top,c={itemId:t,itemIndex:n,height:o,top:l,offsetY:a-l,pageY:a};H=setTimeout(this.startDrag.bind(this,c),500)}},{key:"handlePointerUp",value:function(e){clearTimeout(H),this.state.isDragging&&this.stopDrag()}},{key:"handlePointerCancel",value:function(e){clearTimeout(H),this.state.isDragging&&this.stopDrag()}},{key:"handlePointerMove",value:function(e){if(this.state.isDragging){var t=this.state,n=t.dragItemTopEdgeOffsetY,r=t.dragItemHeight,a=t.dragItemTop,i=t.dragItemIndex,o=X(this.state.listRef.current),c=e.pageY,s=J(c-o-n,r,this.props.items.length-1);if(s===i){var d=c-a-n;this.setState({dragItemRelativeOffsetTop:d,dragPointerPageY:c})}else{var u=s*r+o,h=e.pageY-u-n,m=this.reorderItems(this.props.items,i,s).reduce((function(e,t){return Object(l.a)({},e,Object(_.a)({},t.id,t.orderId))}),{});this.props.onOrderChange(m),this.setState({dragItemRelativeOffsetTop:h,dragPointerPageY:c,dragItemTop:u,dragItemIndex:s})}}}},{key:"getBoundingRects",value:function(e){var t=this;return e.reduce((function(e,n){var r=t.itemRefs[n.id].current.getBoundingClientRect();return Object(l.a)({},e,Object(_.a)({},n.id,r))}),{})}},{key:"didItemOrderChange",value:function(e,t){for(var n=function(n){var r=e[n],a=t.find((function(e){return e.id===r.id}));if(a&&r.orderId!==a.orderId)return{v:!0}},r=0;r<e.length;r+=1){var a=n(r);if("object"===typeof a)return a.v}return!1}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.didItemOrderChange(e.items,this.props.items)?this.getBoundingRects(e.items):null}},{key:"componentDidUpdate",value:function(e,t,n){var r=this;if(n)for(var a=n,i=this.getBoundingRects(this.props.items),o=function(e){var t=r.props.items[e],n=r.itemRefs[t.id].current,o=i[t.id],l=a[t.id];if(!l)return"continue";var c=l.top-o.top;requestAnimationFrame((function(){n.style.transform="translate(0, ".concat(c,"px)"),n.style.transition="transform 0s",requestAnimationFrame((function(){n.style.transform="",n.style.transition="transform 300ms"}))}))},l=0;l<this.props.items.length;l+=1)o(l)}},{key:"getItemElement",value:function(e,t){this.itemRefs[e.id]=this.itemRefs[e.id]||a.a.createRef();var n=e.id===this.state.dragItemId?{top:"".concat(this.state.dragItemRelativeOffsetTop,"px")}:{};return a.a.createElement(z,{key:e.id,ref:this.itemRefs[e.id],text:e.text,isCompleted:e.isCompleted,isBeingDragged:e.id===this.state.dragItemId,itemStyle:n,onValueChange:this.props.onValueChange,onCheckClick:this.props.onCheckClick,onInputEnter:this.props.onInputEnter,id:e.id,index:t,isOpen:e.isOpen,onBlur:this.props.onBlur,orderId:e.orderId,onDeleteClick:this.props.onDeleteClick,hasCheckButton:!0,onPointerDown:this.handlePointerDown})}},{key:"getElementCollection",value:function(e){var t=this;return e.items.map((function(e,n){return t.getItemElement(e,n)}))}},{key:"render",value:function(){var e=this.getElementCollection({items:this.props.items}),t=this.getElementCollection({items:this.props.completedItems});return a.a.createElement("ul",{ref:this.state.listRef,className:V.a.ItemList,onPointerUp:this.handlePointerUp,onPointerCancel:this.handlePointerCancel,onPointerMove:this.handlePointerMove},e,this.props.showCompleted?t:null)}}]),n}(a.a.Component),K=n(22),Z=n.n(K);var $=function(e){return a.a.createElement("button",{className:Z.a.Button,onClick:e.onClick},e.children)},ee=n(23),te=n.n(ee);var ne=function(e){return a.a.createElement("div",{className:te.a.Toolbar},a.a.createElement($,{onClick:e.onAddItemClick},"Add item"),a.a.createElement($,{onClick:e.onCompletedToggle},"Toggle completed"))},re=n(45),ae=n(24),ie=n(25),oe=n(9),le=n.n(oe),ce=n(26),se=n.n(ce),de="linda-groceries.herokuapp.com",ue="https://".concat(de),he="wss://".concat(de,"/cable"),me={Accept:"application/json","Content-Type":"application/json"},fe=Object(ie.createConsumer)(he),ge=Object(re.a)(),pe="disconnected";function ve(e){"disconnected"===pe?console.log("AC disconnected, ignoring getItems request."):le.a.getItem("queue").then((function(e){return e=e||[],console.log("Flushing queue: ",e),e.length?(t=e,t.reduce((function(e,t){return e.then((function(){return(e=t,Promise.resolve(new Request(e.url,e))).then((function(e){return fetch(e)}));var e}))}),Promise.resolve())).then((function(){return le.a.setItem("queue",[])})):Promise.resolve();var t})).then((function(){return fetch("".concat(ue,"/items"),{headers:me}).then(Oe).then(e)}))}function Ie(e){var t=Object.assign({},e,{clientId:ge});be(new Request("".concat(ue,"/items"),{method:"post",headers:me,body:JSON.stringify(t)}))}function Ce(e){var t=Object.assign({},e,{clientId:ge});be(new Request("".concat(ue,"/items/").concat(e.id),{method:"put",headers:me,body:JSON.stringify(t)}))}function Oe(e){return e.json()}function be(e){"disconnected"===pe?(console.log("AC disconnected, enqueueing request."),function(e){(function(e){var t,n={},r=Object(ae.a)(e.headers.entries());try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a[0]]=a[1]}}catch(o){r.e(o)}finally{r.f()}var i={url:e.url,headers:n,method:e.method,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer};if("GET"!==e.method&&"HEAD"!==e.method)return e.clone().text().then((function(e){return i.body=e,Promise.resolve(i)}));return Promise.resolve(i)})(e).then((function(e){le.a.getItem("queue").then((function(t){return(t=t||[]).push(e),le.a.setItem("queue",t).then((function(){console.log(e.method,e.url,"enqueued!")}))}))}))}(e)):ke(e)}var ke=se()(fetch,3e3);function ye(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var je={items:[],showCompleted:!0,onLineStatus:navigator.onLine?"online":"offline"},_e=function(){return Object.assign({},je,JSON.parse(window.localStorage.getItem("groceries"))||{})},we=function(e){Object(m.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state=_e(),r.handleConnected=r.handleConnected.bind(Object(u.a)(r)),r.handleDisconnected=r.handleDisconnected.bind(Object(u.a)(r)),r.handleReceived=r.handleReceived.bind(Object(u.a)(r)),r.handleAddItemClick=r.handleAddItemClick.bind(Object(u.a)(r)),r.handleDeleteItemClick=r.handleDeleteItemClick.bind(Object(u.a)(r)),r.handleValueChange=r.handleValueChange.bind(Object(u.a)(r)),r.handleCheckClick=r.handleCheckClick.bind(Object(u.a)(r)),r.handleItemBlur=r.handleItemBlur.bind(Object(u.a)(r)),r.handleInputEnter=r.handleInputEnter.bind(Object(u.a)(r)),r.handleReloadClick=r.handleReloadClick.bind(Object(u.a)(r)),r.handleCompletedToggle=r.handleCompletedToggle.bind(Object(u.a)(r)),r.handleOrderChange=r.handleOrderChange.bind(Object(u.a)(r)),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){!function(e){var t=e.onConnected,n=e.onDisconnected,r=e.onReceived;fe.subscriptions.create({channel:"ListChannel"},{connected:function(){pe="connected",t()},disconnected:function(){pe="disconnected",n()},received:function(e){r(e)}})}({onConnected:this.handleConnected,onDisconnected:this.handleDisconnected,onReceived:this.handleReceived})}},{key:"componentDidUpdate",value:function(){var e;e=this.state,window.localStorage.setItem("groceries",JSON.stringify(e))}},{key:"loadItems",value:function(){var e=this;ve((function(t){e.setState({items:t})}))}},{key:"handleConnected",value:function(){console.log("Connected to Action Cable WebSocket."),this.loadItems(),this.setState({onLineStatus:"online"})}},{key:"handleDisconnected",value:function(){console.log("Disconnected from Action Cable WebSocket."),this.setState({onLineStatus:"tryingToConnect"})}},{key:"hasItem",value:function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].id===t)return!0;return!1}},{key:"handleReceived",value:function(e){if(e.clientId!==ge)switch(e.message_type){case"item_create":this.hasItem(this.state.items,e.item.id)||this.createItem(e.item);break;case"item_update":this.updateItem(e.item);break;case"item_delete":this.deleteItem(e.item.id);break;default:console.log("Unrecognized message type")}}},{key:"createItem",value:function(e){var t=e.id,n=void 0===t?Object(re.a)():t,r=e.orderId,a=e.text,i=void 0===a?"":a,o=e.isCompleted,l=void 0!==o&&o,c=e.isOpen,s={id:n,orderId:r,text:i,isCompleted:l,isOpen:void 0!==c&&c};return this.setState({items:this.state.items.map((function(e){return e.orderId>=s.orderId?Object.assign({},e,{orderId:e.orderId+1}):e})).concat(s)}),s}},{key:"updateItem",value:function(e){this.setState({items:this.state.items.map((function(t){return t.id===e.id?Object.assign({},t,e):t}))})}},{key:"deleteItem",value:function(e){this.setState({items:this.state.items.filter((function(t){return t.id!==e}))})}},{key:"handleAddItemClick",value:function(){var e,t=this.state.items.filter((function(e){return!e.isCompleted})).map((function(e){return e.orderId}));e=t.length>0?Math.max.apply(Math,Object(c.a)(t))+1:0,Ie(this.createItem({orderId:e,isOpen:!0}))}},{key:"handleInputEnter",value:function(e){var t=e.orderId+1;Ie(this.createItem({orderId:t,isOpen:!0}))}},{key:"handleDeleteItemClick",value:function(e){var t=e.id;this.deleteItem(t),function(e){var t={clientId:e};be(new Request("".concat(ue,"/items/").concat(e),{method:"delete",headers:me,body:JSON.stringify(t)}))}(t)}},{key:"handleItemBlur",value:function(e){var t=e.id;this.setState({items:this.state.items.map((function(e){return e.id===t?Object.assign({},e,{isOpen:!1}):e}))})}},{key:"handleValueChange",value:function(e){var t=e.id,n=e.text;this.setState({items:this.state.items.map((function(e){if(e.id===t){var r=Object.assign({},e,{text:n});return Ce(r),r}return e}))})}},{key:"handleCheckClick",value:function(e){var t,n=e.id,r=e.isCompleted,a=this.state.items.filter((function(e){return e.isCompleted===!r})).map((function(e){return e.orderId}));t=a.length>0?r?Math.max.apply(Math,Object(c.a)(a))+1:Math.min.apply(Math,Object(c.a)(a))-1:0,this.setState({items:this.state.items.map((function(e){if(e.id===n){var r=Object.assign({},e,{isCompleted:!e.isCompleted,orderId:t});return Ce(r),r}return e}))})}},{key:"handleReloadClick",value:function(){this.loadItems()}},{key:"handleCompletedToggle",value:function(){this.setState((function(e){return ye(e,"showCompleted")?{showCompleted:!e.showCompleted}:{showCompleted:!1}}))}},{key:"handleOrderChange",value:function(e){var t=[];this.setState({items:this.state.items.map((function(n){if(ye(e,n.id)){var r=Object(l.a)({},n,{orderId:e[n.id]});return t.push(r),r}return n}))}),function(e){var t={items:e,clientId:ge};be(new Request("".concat(ue,"/items/update_many"),{method:"put",headers:me,body:JSON.stringify(t)}))}(t)}},{key:"render",value:function(){var e=!ye(this.state,"showCompleted")||this.state.showCompleted,t=this.state.items.filter((function(e){return!e.isCompleted})).sort((function(e,t){return e.orderId-t.orderId})),n=this.state.items.filter((function(e){return e.isCompleted})).sort((function(e,t){return e.orderId-t.orderId}));return a.a.createElement("div",{className:"App"},a.a.createElement(b,{onReloadClick:this.handleReloadClick,title:"Linda v21"}),a.a.createElement(j,{status:this.state.onLineStatus}),a.a.createElement(G,{items:t,completedItems:n,onValueChange:this.handleValueChange,onOrderChange:this.handleOrderChange,onCheckClick:this.handleCheckClick,onBlur:this.handleItemBlur,onInputEnter:this.handleInputEnter,onAddItemClick:this.handleAddItemClick,onDeleteClick:this.handleDeleteItemClick,showCompleted:e}),a.a.createElement(ne,{onAddItemClick:this.handleAddItemClick,onCompletedToggle:this.handleCompletedToggle}))}}]),n}(a.a.Component),Ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Re(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(we,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/groceries",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/groceries","/service-worker.js");Ee?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Re(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Re(t,e)}))}}()},8:function(e,t,n){e.exports={Header:"Header_Header__1fHt3",Heading:"Header_Heading__CQRSf",ReloadButton:"Header_ReloadButton__2mUpS",ReloadIcon:"Header_ReloadIcon__3bE06"}}},[[28,1,2]]]);
//# sourceMappingURL=main.eef58234.chunk.js.map