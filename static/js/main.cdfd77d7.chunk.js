(this.webpackJsonpgroceries=this.webpackJsonpgroceries||[]).push([[0],[,,function(e,t,n){e.exports={Item:"Item_Item__16sp8",ItemCompleted:"Item_ItemCompleted__3IRuI Item_Item__16sp8",field:"Item_field__2uX1q",textCompleted:"Item_textCompleted__ij3Pf Item_field__2uX1q",CheckBox:"Item_CheckBox__hgMI8",Checked:"Item_Checked__2Na6Q",Unchecked:"Item_Unchecked__gt_ks",DeleteButton:"Item_DeleteButton__3jjaR",DeleteIcon:"Item_DeleteIcon__1WSAP"}},function(e,t,n){e.exports={Header:"Header_Header__1fHt3",Heading:"Header_Heading__CQRSf",ReloadButton:"Header_ReloadButton__2mUpS",ReloadIcon:"Header_ReloadIcon__3bE06"}},,,,,,function(e,t,n){e.exports={ItemList:"ItemList_ItemList__4ujzD"}},function(e,t,n){e.exports={Button:"ToolbarButton_Button__3uxur"}},function(e,t,n){e.exports={Toolbar:"Toolbar_Toolbar__1fjPn"}},,,,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),i=n.n(o),l=(n(21),n(4)),c=n(7),s=n(8),d=n(1),u=n(13),m=n(14),h=(n(22),n(3)),f=n.n(h);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function v(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var C=r.a.createElement("path",{d:"m13.3254199 1.01518685.0872208.07770637 3.5355339 3.5355339c.3626297.3626297.3885318.9344751.0777064 1.32699275l-.0777064.08722082-3.5355339 3.5355339c-.3905243.39052429-1.0236893.39052429-1.4142136 0-.3626297-.3626297-.3885318-.93447509-.0777063-1.32699275l.0777063-.08722081 2.1438822-2.1432897c-.3039584-.01380945-.655332-.0204143-1.0725216-.02217343l-1.0697877.0015021c-3.3137085 0-6 2.6862915-6 6s2.6862915 6 6 6 6-2.6862915 6-6c0-.5522847.4477153-1 1-1s1 .4477153 1 1c0 4.418278-3.581722 8-8 8s-8-3.581722-8-8 3.581722-8 8-8l1.1081784-.00147832c.1345115.00058353.2633284.00164591.386965.00327194l-1.4967163-1.49468684c-.3626297-.3626297-.3885318-.93447509-.0777063-1.32699275l.0777063-.08722081c.3626297-.3626297.9344751-.38853182 1.3269928-.07770637z"}),g=function(e){var t=e.svgRef,n=e.title,a=v(e,["svgRef","title"]);return r.a.createElement("svg",p({height:24,viewBox:"0 0 24 24",width:24,ref:t},a),n?r.a.createElement("title",null,n):null,C)},I=r.a.forwardRef((function(e,t){return r.a.createElement(g,p({svgRef:t},e))}));n.p;var b=function(e){return r.a.createElement("header",{className:f.a.Header},r.a.createElement("div",null),r.a.createElement("h1",{className:f.a.Heading},"Linda from Purcha$ing v18"),r.a.createElement("button",{className:f.a.ReloadButton,onClick:e.onReloadClick},r.a.createElement(I,{className:f.a.ReloadIcon})))},k=n(2),O=n.n(k);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var _=r.a.createElement("path",{d:"m12 0c6.627417 0 12 5.372583 12 12s-5.372583 12-12 12-12-5.372583-12-12 5.372583-12 12-12zm0 2c-5.5228475 0-10 4.4771525-10 10s4.4771525 10 10 10 10-4.4771525 10-10-4.4771525-10-10-10zm5.3033009 5.31801948 1.4142135 1.41421357-8.4852814 8.48528135-4.94974742-4.9497474 1.41421356-1.4142136 3.53482676 3.536241z",fillRule:"evenodd"}),E=function(e){var t=e.svgRef,n=e.title,a=j(e,["svgRef","title"]);return r.a.createElement("svg",y({height:24,viewBox:"0 0 24 24",width:24,ref:t},a),n?r.a.createElement("title",null,n):null,_)},w=r.a.forwardRef((function(e,t){return r.a.createElement(E,y({svgRef:t},e))}));n.p;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var B=r.a.createElement("path",{d:"m12 0c6.627417 0 12 5.372583 12 12s-5.372583 12-12 12-12-5.372583-12-12 5.372583-12 12-12zm0 2c-5.5228475 0-10 4.4771525-10 10s4.4771525 10 10 10 10-4.4771525 10-10-4.4771525-10-10-10z"}),S=function(e){var t=e.svgRef,n=e.title,a=x(e,["svgRef","title"]);return r.a.createElement("svg",R({height:24,viewBox:"0 0 24 24",width:24,ref:t},a),n?r.a.createElement("title",null,n):null,B)},D=r.a.forwardRef((function(e,t){return r.a.createElement(S,R({svgRef:t},e))}));n.p;function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function P(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var T=r.a.createElement("path",{d:"m12 2c5.5228475 0 10 4.4771525 10 10s-4.4771525 10-10 10-10-4.4771525-10-10 4.4771525-10 10-10zm3.5355339 5.05025253-3.5352814 3.53599997-3.53578641-3.53599997-1.41421356 1.41421356 3.53599997 3.53578641-3.53599997 3.5352814 1.41421356 1.4142136 3.53578641-3.535495 3.5352814 3.535495 1.4142136-1.4142136-3.535495-3.5352814 3.535495-3.53578641z",fillRule:"evenodd"}),A=function(e){var t=e.svgRef,n=e.title,a=P(e,["svgRef","title"]);return r.a.createElement("svg",N({height:24,viewBox:"0 0 24 24",width:24,ref:t},a),n?r.a.createElement("title",null,n):null,T)},H=r.a.forwardRef((function(e,t){return r.a.createElement(A,N({svgRef:t},e))}));n.p;var z=function(e){var t=e.onDeleteClick?r.a.createElement("button",{className:O.a.DeleteButton,onClick:function(t){e.onDeleteClick&&e.onDeleteClick({id:e.id})}},r.a.createElement(H,{className:O.a.DeleteIcon})):null,n=e.hasCheckButton?r.a.createElement("button",{className:O.a.CheckBox,onClick:function(t){e.onCheckClick&&e.onCheckClick({id:e.id,isCompleted:e.isCompleted})}},e.isCompleted?r.a.createElement(w,{className:O.a.Checked}):r.a.createElement(D,{className:O.a.Unchecked})):null,a=e.isCompleted?O.a.ItemCompleted:O.a.Item,o=e.isCompleted?O.a.textCompleted:O.a.field;return r.a.createElement("li",{className:a},n,r.a.createElement("input",{className:o,type:"text",value:e.text,onChange:function(t){e.onValueChange&&e.onValueChange({id:e.id,text:t.target.value})},disabled:!!e.isCompleted,autoFocus:e.isOpen,onFocus:function(){e.onInputFocus&&e.onInputFocus()},onBlur:function(){e.onBlur&&e.onBlur({id:e.id})},onKeyUp:function(t){"Enter"===t.key&&e.onInputEnter({orderId:e.orderId})}}),t)},M=n(9),U=n.n(M);var V=function(e){var t=function(t){var n=t.array,a=t.isCompleted;return n.filter((function(e){return e.isCompleted===a})).sort((function(e,t){return e.orderId-t.orderId})).map((function(t){return function(t){return r.a.createElement(z,{key:t.id,text:t.text,isCompleted:t.isCompleted,onValueChange:e.onValueChange,onCheckClick:e.onCheckClick,onInputEnter:e.onInputEnter,id:t.id,isOpen:t.isOpen,onBlur:e.onBlur,orderId:t.orderId,onDeleteClick:e.onDeleteClick,hasCheckButton:!0})}(t)}))},n=t({array:e.items,isCompleted:!1}),a=t({array:e.items,isCompleted:!0});return r.a.createElement("ul",{className:U.a.ItemList},n,e.showCompleted?a:null)},L=n(10),J=n.n(L);var F=function(e){return r.a.createElement("button",{className:J.a.Button,onClick:e.onClick},e.children)},W=n(11),q=n.n(W);var Q=function(e){return r.a.createElement("div",{className:q.a.Toolbar},r.a.createElement(F,{onClick:e.onAddItemClick},"Add item"),r.a.createElement(F,{onClick:e.onCompletedToggle},"Toggle completed"))},X=n(24),$=n(12),K="linda-groceries.herokuapp.com",G="https://".concat(K),Y="wss://".concat(K,"/cable"),Z={Accept:"application/json","Content-Type":"application/json"},ee=Object($.createConsumer)(Y);function te(e){return e.json()}var ne={id:Object(X.a)(),subscribeToUpdates:function(e){var t=e.onConnected,n=e.onDisconnected,a=e.onReceived;ee.subscriptions.create({channel:"ListChannel"},{connected:function(){t()},disconnected:function(){n()},received:function(e){a(e)}})},getItems:function(e){fetch("".concat(G,"/items"),{headers:Z}).then(te).then(e)},createItem:function(e){var t=Object.assign({},e,{clientId:this.id});fetch("".concat(G,"/items"),{method:"post",headers:Z,body:JSON.stringify(t)})},updateItem:function(e){var t=Object.assign({},e,{clientId:this.id});fetch("".concat(G,"/items/").concat(e.id),{method:"put",headers:Z,body:JSON.stringify(t)})},deleteItem:function(e){var t={clientId:this.id};fetch("".concat(G,"/items/").concat(e),{method:"delete",headers:Z,body:JSON.stringify(t)})}};function ae(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var re=function(e){Object(m.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).state=JSON.parse(window.localStorage.getItem("groceries"))||{items:[],showCompleted:!0},a.handleConnected=a.handleConnected.bind(Object(d.a)(a)),a.handleDisconnected=a.handleDisconnected.bind(Object(d.a)(a)),a.handleReceived=a.handleReceived.bind(Object(d.a)(a)),a.handleAddItemClick=a.handleAddItemClick.bind(Object(d.a)(a)),a.handleDeleteItemClick=a.handleDeleteItemClick.bind(Object(d.a)(a)),a.handleValueChange=a.handleValueChange.bind(Object(d.a)(a)),a.handleCheckClick=a.handleCheckClick.bind(Object(d.a)(a)),a.handleItemBlur=a.handleItemBlur.bind(Object(d.a)(a)),a.handleInputEnter=a.handleInputEnter.bind(Object(d.a)(a)),a.handleReloadClick=a.handleReloadClick.bind(Object(d.a)(a)),a.handleCompletedToggle=a.handleCompletedToggle.bind(Object(d.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;ne.getItems((function(t){e.setState({items:t})})),ne.subscribeToUpdates({onConnected:this.handleConnected,onDisconnected:this.handleDisconnected,onReceived:this.handleReceived})}},{key:"componentDidUpdate",value:function(){var e;e=this.state,window.localStorage.setItem("groceries",JSON.stringify(e))}},{key:"handleConnected",value:function(){console.log("Connected to ListChannel.")}},{key:"handleDisconnected",value:function(){console.log("Disconnected from ListChannel.")}},{key:"hasItem",value:function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].id===t)return!0;return!1}},{key:"handleReceived",value:function(e){if(e.clientId!==ne.id)switch(e.message_type){case"item_create":this.hasItem(this.state.items,e.item.id)||this.createItem(e.item);break;case"item_update":this.updateItem(e.item);break;case"item_delete":this.deleteItem(e.item.id);break;default:console.log("Unrecognized message type")}}},{key:"createItem",value:function(e){var t=e.id,n=void 0===t?Object(X.a)():t,a=e.orderId,r=e.text,o=void 0===r?"":r,i=e.isCompleted,l=void 0!==i&&i,c=e.isOpen,s={id:n,orderId:a,text:o,isCompleted:l,isOpen:void 0!==c&&c};return this.setState({items:this.state.items.map((function(e){return e.orderId>=s.orderId?Object.assign({},e,{orderId:e.orderId+1}):e})).concat(s)}),s}},{key:"updateItem",value:function(e){this.setState({items:this.state.items.map((function(t){return t.id===e.id?Object.assign({},t,e):t}))})}},{key:"deleteItem",value:function(e){this.setState({items:this.state.items.filter((function(t){return t.id!==e}))})}},{key:"handleAddItemClick",value:function(){var e,t=this.state.items.filter((function(e){return!e.isCompleted})).map((function(e){return e.orderId}));e=t.length>0?Math.max.apply(Math,Object(l.a)(t))+1:0;var n=this.createItem({orderId:e,isOpen:!0});ne.createItem(n)}},{key:"handleInputEnter",value:function(e){var t=e.orderId+1,n=this.createItem({orderId:t,isOpen:!0});ne.createItem(n)}},{key:"handleDeleteItemClick",value:function(e){var t=e.id;this.deleteItem(t),ne.deleteItem(t)}},{key:"handleItemBlur",value:function(e){var t=e.id;this.setState({items:this.state.items.map((function(e){return e.id===t?Object.assign({},e,{isOpen:!1}):e}))})}},{key:"handleValueChange",value:function(e){var t=e.id,n=e.text;this.setState({items:this.state.items.map((function(e){if(e.id===t){var a=Object.assign({},e,{text:n});return ne.updateItem(a),a}return e}))})}},{key:"handleCheckClick",value:function(e){var t,n=e.id,a=e.isCompleted,r=this.state.items.filter((function(e){return e.isCompleted===!a})).map((function(e){return e.orderId}));t=r.length>0?a?Math.max.apply(Math,Object(l.a)(r))+1:Math.min.apply(Math,Object(l.a)(r))-1:0,this.setState({items:this.state.items.map((function(e){if(e.id===n){var a=Object.assign({},e,{isCompleted:!e.isCompleted,orderId:t});return ne.updateItem(a),a}return e}))})}},{key:"handleReloadClick",value:function(){var e=this;ne.getItems((function(t){e.setState({items:t})}))}},{key:"handleCompletedToggle",value:function(){this.setState((function(e){return ae(e,"showCompleted")?{showCompleted:!e.showCompleted}:{showCompleted:!1}}))}},{key:"render",value:function(){var e=!ae(this.state,"showCompleted")||this.state.showCompleted;return r.a.createElement("div",{className:"App"},r.a.createElement(b,{onReloadClick:this.handleReloadClick}),r.a.createElement(V,{items:this.state.items,onValueChange:this.handleValueChange,onCheckClick:this.handleCheckClick,onBlur:this.handleItemBlur,onInputEnter:this.handleInputEnter,onAddItemClick:this.handleAddItemClick,onDeleteClick:this.handleDeleteItemClick,showCompleted:e}),r.a.createElement(Q,{onAddItemClick:this.handleAddItemClick,onCompletedToggle:this.handleCompletedToggle}))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[16,1,2]]]);
//# sourceMappingURL=main.cdfd77d7.chunk.js.map